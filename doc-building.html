<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="One BIG point to keep in mind while getting the dependencies set up on Windows 
is to watch out for the architecture and compiler version otherwise you&#39;re 
getting into a hell of linker issues." />

    <title>Building
</title>

    
    <link rel="stylesheet" href="styles.css" />
    
  </head>

  <body class="body--themed">
    <div id="__app__"><div data-reactroot="" data-reactid="1" data-react-checksum="1207154328"><div data-reactid="2"></div><!-- react-empty: 3 --><!-- react-empty: 4 --><div class="root root--with-multi-page-layout root--with-fixed-sidebar root--with-two-column-layout root--without-banner" data-reactid="5"><div class="root__screen" data-reactid="6"><div class="two-column-layout two-column-layout--with-nav" data-reactid="7"><div class="two-column-layout__left" style="width:240px;" data-reactid="8"><div class="resizable-panel" data-reactid="9"><div class="resizable-panel__content" data-reactid="10"><div data-reactid="11"><div data-reactid="12"><nav data-reactid="13"><div data-reactid="14"><div data-reactid="15"><a href="index.html" class="class-browser__entry-link" data-reactid="16"><!-- react-text: 17 -->Karazeh
<!-- /react-text --></a></div><div data-reactid="18"><a href="doc-architecture.html" class="class-browser__entry-link" data-reactid="19"><!-- react-text: 20 -->Architecture
<!-- /react-text --></a></div><div data-reactid="21"><a href="doc-authoring_patches.html" class="class-browser__entry-link" data-reactid="22"><!-- react-text: 23 -->Authoring Patches
<!-- /react-text --></a></div><div data-reactid="24"><a href="" class="class-browser__entry-link active" data-reactid="25"><!-- react-text: 26 -->Building
<!-- /react-text --></a></div><div data-reactid="27"><a href="doc-faq.html" class="class-browser__entry-link" data-reactid="28"><!-- react-text: 29 -->FAQ
<!-- /react-text --></a></div><div data-reactid="30"><a href="doc-internals.html" class="class-browser__entry-link" data-reactid="31"><!-- react-text: 32 -->Internals
<!-- /react-text --></a></div><div data-reactid="33"><a href="doc-overview.html" class="class-browser__entry-link" data-reactid="34"><!-- react-text: 35 -->Overview
<!-- /react-text --></a></div></div></nav></div></div></div><div class="ui-resizable-handle ui-resizable-e" data-reactid="36"></div></div></div><div class="two-column-layout__right" style="margin-left:240px;" data-reactid="37"><div data-reactid="38"><div class="doc-content" data-reactid="39"><div data-reactid="40"><div data-reactid="41"><div class="highlighted-text " data-reactid="42">
    <h1 class="anchorable-heading">
      <a name="building" class="anchorable-heading__anchor"></a>
      <a href="#building" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">Building</span>
    </h1>
  
    <h2 class="anchorable-heading">
      <a name="windows" class="anchorable-heading__anchor"></a>
      <a href="#windows" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">Windows</span>
    </h2>
  <p>One BIG point to keep in mind while getting the dependencies set up on Windows 
is to watch out for the architecture and compiler version otherwise you&#39;re 
getting into a hell of linker issues.</p>
<p>This guide was written for Visual Studio Express 2013 (referred to as the MSVC 
12 compiler) under Windows 7 x86.</p>

    <h3 class="anchorable-heading">
      <a name="setting-up-cmake" class="anchorable-heading__anchor"></a>
      <a href="#setting-up-cmake" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">Setting up CMake</span>
    </h3>
  <p>Download CMake from <a href="https://cmake.org" target="_blank">https://cmake.org</a> and follow the installation steps. Once
you have that set up, we&#39;ll need to get the dependencies built before 
attempting to build Karazeh itself.</p>

    <h3 class="anchorable-heading">
      <a name="boost" class="anchorable-heading__anchor"></a>
      <a href="#boost" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">Boost</span>
    </h3>
  <p>Any version past 1.46 works. At this time, I used 1.61.</p>
<p>Get the binaries from <a href="https://sourceforge.net/projects/boost/files/boost-binaries/1.61.0/" target="_blank">https://sourceforge.net/projects/boost/files/boost-binaries/1.61.0/</a> and run the installer.</p>
<p><strong>MAKE SURE YOU CHOOSE THE RIGHT COMPILER AND ARCHITECTURE!!!</strong> In my case it
was <code>boost_1_61_0-msvc-12.0-32.exe</code>.</p>
<p>In the later steps, I&#39;ll assume you&#39;ve used the default installation path - if 
you haven&#39;t, make sure you amend where needed.</p>

    <h3 class="anchorable-heading">
      <a name="libcurl-7-49-1" class="anchorable-heading__anchor"></a>
      <a href="#libcurl-7-49-1" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">libcurl (7.49.1+)</span>
    </h3>
  <p>Get the cURL sources, unzip them to something like <code>C:\local\curl</code> and then
launch the Visual Studio Command Prompt (we need this for <code>nmake</code>).</p>
<p>Follow the guide over at <a href="https://github.com/curl/curl/blob/master/winbuild/BUILD.WINDOWS.txt" target="_blank">https://github.com/curl/curl/blob/master/winbuild/BUILD.WINDOWS.txt</a> but it basically comes down to compiling with a command like
the following:</p>
<pre class="language-javascript"><code>nmake <span class="token operator" >/</span>f Makefile<span class="token punctuation" >.</span>vc mode<span class="token operator" >=</span>dll MACHINE<span class="token operator" >=</span>x86 VC<span class="token operator" >=</span><span class="token number" >12</span> ENABLE_WINSSL<span class="token operator" >=</span>yes</code></pre><p>We do not build against OpenSLL or SSH2, just use the Windows stock SSL 
library. You can optionally install zlib and configure cURL to use it if you
want.</p>
<p>Anyway, should the compilation succeed, the build output will be found under
<code>C:\local\curl\builds\libcurl-{COMPILER}-{ARCHITECTURE}-{CONFIGURATION}-{OPTIONS...}</code> mine was something like <code>libcurl-vc12-x86-release-dll-ipv6-sspi-winssl</code>.
The files here are what we&#39;ll be using to satisfy Karazeh&#39;s dependency. We&#39;ll 
touch upon this later.</p>

    <h3 class="anchorable-heading">
      <a name="librsync-2-0-0" class="anchorable-heading__anchor"></a>
      <a href="#librsync-2-0-0" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">librsync (2.0.0)</span>
    </h3>
  <p>Might be the worst of the lot, mainly because of its stupid dependencies on 
Perl (only as a pre-compile step though.)</p>
<ol>
<li>Get Perl installed from <a href="https://www.perl.org/get.html#win32" target="_blank">https://www.perl.org/get.html#win32</a> - I chose the 
ActiveState perl version because it was the smallest download. Nothing 
special here, follow with the installer then CMake will find the interpreter
that we need.</li>
<li>Cross your fingers.</li>
</ol>
<p>Nothing more to do here, this is built in the actual Karazeh solution we&#39;ll 
get to later.</p>

    <h3 class="anchorable-heading">
      <a name="googletest-optional-if-you-want-to-run-the-tests" class="anchorable-heading__anchor"></a>
      <a href="#googletest-optional-if-you-want-to-run-the-tests" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">googletest (optional, if you want to run the tests)</span>
    </h3>
  <p>???</p>

    <h3 class="anchorable-heading">
      <a name="karazeh" class="anchorable-heading__anchor"></a>
      <a href="#karazeh" class="anchorable-heading__link icon icon-link"></a><span class="anchorable-heading__text">Karazeh</span>
    </h3>
  <p>In order to make CMake find the libraries automatically (I&#39;m talking about the
CMake GUI here) we need to tune some environment variables[1].</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Anytime you modify an ENV var, make sure you <em>restart</em> CMake gui otherwise
it doesn&#39;t seem to pick up the new variables.</p>
</blockquote>
<p><strong>CMake with <code>boost</code></strong></p>
<ul>
<li>set <code>BOOST_ROOT</code> to wherever the boost installation was, mine was 
<code>C:\local\boost_1_61_0</code></li>
<li>set <code>BOOST_LIBRARYDIR</code> to the folder in which the libraries for your architecture and compiler version, e.g.: <code>C:\local\boost_1_61_0\lib32-msvc-12.0</code></li>
</ul>
<p><strong>CMake with <code>libcurl</code></strong></p>
<p>To tune for <code>libcurl</code>, we adjust <code>CMAKE_PREFIX_PATH</code> to include the folder 
where the headers (<code>curl/curl.h</code>) may be found as well as the built library (<code>libcurl.lib</code>). If we unpacked the sources of libcurl to <code>C:\local\curl</code>, we need a value like the following:</p>
<pre class="language-javascript"><code>C<span class="token punctuation" >:</span>\local\curl\builds\libcurl<span class="token operator" >-</span>vc12<span class="token operator" >-</span>x86<span class="token operator" >-</span>release<span class="token operator" >-</span>dll<span class="token operator" >-</span>ipv6<span class="token operator" >-</span>sspi<span class="token operator" >-</span>winssl<span class="token punctuation" >;</span>
C<span class="token punctuation" >:</span>\local\curl\builds\libcurl<span class="token operator" >-</span>vc12<span class="token operator" >-</span>x86<span class="token operator" >-</span>release<span class="token operator" >-</span>dll<span class="token operator" >-</span>ipv6<span class="token operator" >-</span>sspi<span class="token operator" >-</span>winssl\lib</code></pre><p>[1] Go to System Properties -&gt; Advanced -&gt; Environment Variables or type 
<code>rundll32 sysdm.cpl,EditEnvironmentVariables</code> in the run prompt.</p>
</div><!-- react-empty: 43 --></div></div></div><div class="footer" data-reactid="44"><div class="markdown-text " data-reactid="45"><p>Made with &#9829; using <a href="https://github.com/megadoc" target="_blank">megadoc</a>.</p>
</div></div></div></div><div class="two-column-layout__nav" data-reactid="46"><div class="sticky-container" data-reactid="47"><div class="doc-content" data-reactid="48"><p data-reactid="49">Contents</p><div data-reactid="50"><div data-reactid="51"><ul class="markdown-toc markdown-toc--flat" data-reactid="52"><li class="markdown-toc__entry markdown-toc__entry--collapsible" data-reactid="53"><i class="icon icon-arrow-right" data-reactid="54"></i><a href="#windows" class="" data-reactid="55">Windows</a><ul class="markdown-toc" data-reactid="56"><li class="markdown-toc__entry" data-reactid="57"><a href="#setting-up-cmake" class="" data-reactid="58">Setting up CMake</a></li><li class="markdown-toc__entry" data-reactid="59"><a href="#boost" class="" data-reactid="60">Boost</a></li><li class="markdown-toc__entry" data-reactid="61"><a href="#libcurl-7-49-1" class="" data-reactid="62">libcurl (7.49.1+)</a></li><li class="markdown-toc__entry" data-reactid="63"><a href="#librsync-2-0-0" class="" data-reactid="64">librsync (2.0.0)</a></li><li class="markdown-toc__entry" data-reactid="65"><a href="#googletest-optional-if-you-want-to-run-the-tests" class="" data-reactid="66">googletest (optional, if you want to run the tests)</a></li><li class="markdown-toc__entry" data-reactid="67"><a href="#karazeh" class="" data-reactid="68">Karazeh</a></li></ul></li></ul></div></div></div></div></div></div></div></div></div></div>
    
    <script type="text/javascript" src="config.js"></script>
    
    <script type="text/javascript" src="megadoc__vendor.js"></script>
    
    <script type="text/javascript" src="megadoc.js"></script>
    
    <script type="text/javascript" src="plugins/megadoc-theme-qt.js"></script>
    
    <script type="text/javascript" src="plugins/megadoc-plugin-markdown.js"></script>
    
    <script type="text/javascript">
      megadoc.start({
        startingDocumentUID: "articles/doc-building"
      });
    </script>
  </body>
</html>
